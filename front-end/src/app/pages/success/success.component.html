@if (loading) {
<div class="empty-state">
  <h2>Loading purchase details...</h2>
</div>
} @else if (!purchase || !purchaseClothes) {
<div class="empty-state">
  <h2>No purchase information</h2>
  <p>Please try again or contact support</p>
</div>
} @else {
<div class="success-page">
  <div class="success-hero">
    <div class="success-check">
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
        stroke-linecap="round" stroke-linejoin="round">
        <polyline points="20 6 9 17 4 12" />
      </svg>
    </div>
    <h1>Order Confirmed!</h1>
    <p>Your order has been processed successfully</p>
  </div>

  <div class="success-content">
    <div class="success-card">
      <div class="sc-header-row">
        <div>
          <span class="sc-label">Order</span>
          <strong>#{{ purchase.idPu }}</strong>
        </div>
        <div class="sc-date">
          {{ purchase.datePu | date:'mediumDate' }} · {{ purchase.datePu | date:'shortTime' }}
        </div>
      </div>

      <div class="sc-section">
        <h4>Customer</h4>
        <p>{{ purchase.user.nameUs | titlecase }} {{ purchase.user.lastNameUs | titlecase }}</p>
        <p class="sc-muted">{{ purchase.user.addressUs | titlecase }}, {{ purchase.user.municipalityName }}</p>
      </div>

      <div class="sc-section">
        <h4>Shipment</h4>
        <div class="sc-row">
          <span>ID: #{{ purchase.shipment.idSh }}</span>
          <span class="badge" [ngClass]="{
              'status-pending': purchase.shipment.status === 'Pending',
              'status-sent': purchase.shipment.status === 'Sent',
              'status-delivered': purchase.shipment.status === 'Delivered'
            }">
            {{ purchase.shipment.status }}
          </span>
        </div>
      </div>

      <div class="sc-section">
        <h4>Products</h4>
        <div class="sc-products">
          <div class="sc-product" *ngFor="let product of purchaseClothes">
            <div class="sc-product-thumb">
              <img [src]="product.clothe.image" [alt]="product.clothe.nameCl" />
            </div>
            <div class="sc-product-info">
              <span class="sc-product-name">{{ product.clothe.nameCl }}</span>
              <span class="sc-product-detail">Size: {{ product.clothe.size }} · Qty: {{ product.quantity }}</span>
            </div>
            <span class="sc-product-price">{{ product.unitPrice | currency }}</span>
          </div>
        </div>
      </div>

      <div class="sc-total">
        <span>Total Paid</span>
        <span class="sc-total-amount">{{ purchase.amount | currency }}</span>
      </div>
    </div>

    <div class="success-actions">
      <button class="btn-accent" (click)="navigate()">Continue Shopping</button>
      <button class="btn-outline" onclick="window.print()">Print Receipt</button>
    </div>
  </div>
</div>
}