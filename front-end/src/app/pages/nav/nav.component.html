<nav class="site-nav">
    <div class="nav-inner">
        <!-- Logo -->
        <a class="nav-logo" (click)="navigate('')">SLICER</a>

        <!-- Desktop Links -->
        <div class="nav-links">
            <a class="nav-link" (click)="navigate('')">Home</a>
            <a class="nav-link" *ngIf="!isAuthenticated" (click)="navigate('login')">Login</a>
            <a class="nav-link" *ngIf="userRole !== 'admin'" (click)="navigate('bag')">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z" />
                    <line x1="3" y1="6" x2="21" y2="6" />
                    <path d="M16 10a4 4 0 01-8 0" />
                </svg>
                Bag
            </a>
            <a class="nav-link" *ngIf="userRole === 'user'" (click)="navigate('user-purchases')">My Orders</a>

            <!-- Admin Links -->
            <a class="nav-link" *ngIf="userRole === 'admin'" (click)="navigate('new-item')">New Item</a>
            <a class="nav-link" *ngIf="userRole === 'admin'" (click)="navigate('purchases')">Purchases</a>
            <a class="nav-link" *ngIf="userRole === 'admin'" (click)="navigate('pending-purchases')">Pending</a>
            <a class="nav-link" *ngIf="userRole === 'admin'" (click)="navigate('localities')">Localities</a>
            <a class="nav-link" *ngIf="userRole === 'admin'" (click)="navigate('admin-users')">Users</a>
        </div>

        <!-- Search -->
        <div class="nav-search">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8" />
                <line x1="21" y1="21" x2="16.65" y2="16.65" />
            </svg>
            <input type="text" placeholder="Search products..." [(ngModel)]="searchTerm" (input)="onSearchChange()"
                (keydown.enter)="onSearchEnter($any($event))" autocomplete="off" />
            <ul class="search-dropdown" *ngIf="searchResults.length > 0">
                <li *ngFor="let product of searchResults" (click)="goToProduct(product.idCl)">
                    <img *ngIf="product.image" [src]="product.image" [alt]="product.nameCl" class="search-thumb" />
                    <div class="search-item-info">
                        <span class="search-item-name">{{ product.nameCl }}</span>
                        <span class="search-item-price">${{ product.price }}</span>
                    </div>
                </li>
            </ul>
            <div class="search-no-results" *ngIf="searchTerm.length >= 3 && searchResults.length === 0">
                No products found
            </div>
        </div>

        <!-- Right section -->
        <div class="nav-right">
            <span class="nav-greeting" *ngIf="userRole === 'user'">Hi, {{ userName | titlecase }}</span>

            <div class="nav-user-menu" *ngIf="userRole === 'user'">
                <button class="nav-user-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                </button>
                <div class="user-dropdown">
                    <a (click)="navigate('settings')">Settings</a>
                    <a (click)="logout()" class="logout-link">Logout</a>
                </div>
            </div>

            <button *ngIf="userRole === 'admin'" class="btn-ghost nav-logout" (click)="logout()">Logout</button>
        </div>
    </div>
</nav>